{% block stylesheet %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.3/animate.min.css"/>
<script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
<script>
  var firstNum = "";
  var secondNum = "";
$(document).ready(function() {
  // 3D activated 
  var time = setInterval(function() {
    $(".front").addClass('front-s');
    $(".back").addClass('back-s');
    $(".right").addClass('right-s');
    $(".left").addClass('left-s');
    $(".top").addClass('top-s');
    $(".bottom").addClass('bottom-s');
  }, 2000);
  setTimeout(function() {
    clearInterval(time)
  }, 3000);
 
  function on() {
    firstNum = "";
    secondNum = "";
    $("#screen").text("");
  }

  function getNum(digit) {
      secondNum += digit;
      $("#screen").text(secondNum);
  }

  function del() {
    secondNum = secondNum.split('');
    secondNum.pop();
    secondNum = secondNum.join('');
    $("#screen").text(secondNum);
  }

  $("#c").click(function() {
    on();
  });
  $("#del").click(function() {
    del();
  });
  $("#one").click(function() {
    getNum("1");
  });
  $("#two").click(function() {
    getNum("2");
  });
  $("#three").click(function() {
    getNum("3");
  });
  $("#four").click(function() {
    getNum("4");
  });
  $("#five").click(function() {
    getNum("5");
  });
  $("#six").click(function() {
    getNum("6");
  });
  $("#seven").click(function() {
    getNum("7");
  });
  $("#eight").click(function() {
    getNum("8");
  });
  $("#nine").click(function() {
    getNum("9");
  });
  $("#zero").click(function() {
    getNum("0");
  });
  $("#d-zero").click(function() {
    getNum("00");
  });
});
</script>
<style>
/*Main container*/

.container {
  height: auto;
  width: auto;
  padding: 30px;
}

/* 3D object */

.calculater {
  -webkit-perspective: 1200px;
  -moz-perspective: 1200px;
  -o-perspective: 1200px;
  perspective: 1200px;
  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  -o-transform-style: preserve-3d;
  transform-style: preserve-3d;
  height: 500px;
  width: 600px;
  margin: 0 auto;
  position: relative;
}

figure {
  margin: 30px 100px;
  display: block;
  position: absolute;
}

.front-s {
  -webkit-transform: rotateX(30deg) translateZ(50px);
  -moz-transform: rotateX(30deg) translateZ(50px);
  -o-transform: rotateX(30deg) translateZ(50px);
  transform: rotateX(30deg) translateZ(50px);
}

.back-s {
  -webkit-transform: rotateX(30deg) translateZ(-50px);
  -moz-transform: rotateX(30deg) translateZ(-50px);
  -o-transform: rotateX(30deg) translateZ(-50px);
  transform: rotateX(30deg) translateZ(-50px);
}

.right-s {
  -webkit-transform: rotateX(30deg) rotateY(90deg) translateZ(300px);
  -moz-transform: rotateX(30deg) rotateY(90deg) translateZ(300px);
  -o-transform: rotateX(30deg) rotateY(90deg) translateZ(300px);
  transform: rotateX(30deg) rotateY(90deg) translateZ(300px);
}

.left-s {
  -webkit-transform: rotateX(30deg) rotateY(90deg) translateZ(-50px);
  -moz-transform: rotateX(30deg) rotateY(90deg) translateZ(-50px);
  -o-transform: rotateX(30deg) rotateY(90deg) translateZ(-50px);
  transform: rotateX(30deg) rotateY(90deg) translateZ(-50px);
}

.top-s {
  -webkit-transform: rotateX(120deg) translateY(-75px) translateZ(70px);
  -moz-transform: rotateX(120deg) translateY(-75px) translateZ(70px);
  -o-transform: rotateX(120deg) translateY(-75px) translateZ(70px);
  transform: rotateX(120deg) translateY(-75px) translateZ(70px);
}

.bottom-s {
  -webkit-transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
  -moz-transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
  -o-transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
  transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
}

@-webkit-keyframes front {
  0% {
    -webkit-transform: translateZ(50px);
    -moz-transform: translateZ(50px);
    -o-transform: translateZ(50px);
    transform: translateZ(50px);
  }
  100% {
    -webkit-transform: rotateX(30deg) translateZ(50px);
    -moz-transform: rotateX(30deg) translateZ(50px);
    -o-transform: rotateX(30deg) translateZ(50px);
    transform: rotateX(30deg) translateZ(50px);
  }
}

@-webkit-keyframes back {
  0% {
    -webkit-transform: translateZ(-50px);
    -moz-transform: translateZ(-50px);
    -o-transform: translateZ(-50px);
    transform: translateZ(-50px);
  }
  100% {
    -webkit-transform: rotateX(30deg) translateZ(-50px);
    -moz-transform: rotateX(30deg) translateZ(-50px);
    -o-transform: rotateX(30deg) translateZ(-50px);
    transform: rotateX(30deg) translateZ(-50px);
  }
}



@-webkit-keyframes bottom {
  0% {
    -webkit-transform: rotateX(90deg) translateZ(-350px);
    -moz-transform: rotateX(90deg) translateZ(-350px);
    -o-transform: rotateX(90deg) translateZ(-350px);
    transform: rotateX(90deg) translateZ(-350px);
  }
  100% {
    -webkit-transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
    -moz-transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
    -o-transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
    transform: rotateX(120deg) translateY(-75px) translateZ(-330px);
  }
}

.calculater .front {
  height: 400px;
  width: 350px;
  background: rgba(24, 24, 26, 0.99);
  border-radius: 20px 20px 0 0;
  box-shadow: 5px 5px 20px #777;

 -webkit-animation: front 3s;
  -moz-animation: front 3s;
  -o-animation: front 3s;
  
}

.calculater .back {
  height: 400px;
  width: 350px;
  -webkit-animation: back 3s;
  -moz-animation: back 3s;
  -o-animation: back 3s;
  animation: back 3s;
}

.calculater .right {
  height: 400px;
  width: 100px;
  -webkit-animation: right 3s;
  -moz-animation: right 3s;
  -o-animation: right 3s;
  animation: right 3s;
}

.calculater .left {
  height: 400px;
  width: 100px;
  -webkit-animation: left 3s;
  -moz-animation: left 3s;
  -o-animation: left 3s;
  animation: left 3s;
}

.calculater .top {
  height: 100px;
  width: 350px;
  -webkit-animation: top 3s;
  -moz-animation: top 3s;
  -o-animation: top 3s;
  animation: top 3s;
}

.calculater .bottom {
  height: 100px;
  width: 350px;
  background: #555;
  border-radius: 20px 20px 0 0;
  -webkit-animation: bottom 3s;
  -moz-animation: bottom 3s;
  -o-animation: bottom 3s;
  animation: bottom 3s;
}


/*calculater area*/

.front .display {
  height: 80px;
  width: 320px;
  margin: 0 auto;
}

.front .display .screen {
  height: 60px;
  display: block;
  width: 310px;
  margin: 15px auto 0;
  padding: 10px;
  background: #9F8A60;
  color: #ccc;
  font-size: 150%;
  border-radius: 5px;
  border: 3px solid #555;
  -webkit-user-select: none;
}

.front i {
  text-align: center;
  display: block;
  color: white;
}

.front hr {
  width: 300px;
  border-radius: 100%;
  border: 1px solid white;
  margin: 0 auto;
}

.front .click-area {
  -webkit-user-select: none;
  padding: 2px 10px;
  margin: 10px auto 0;
  width: 300px;
  height: auto;
  color: white;
  font-size: 120%;
  font-weight: bold;
}

.click-area .click-top {
  background: none;
}

.click-area .click-top button {
  height: 40px;
  width: 50px;
  outline: 0;
  margin: 3px 50px 3px 0;
  border-radius: 5px;
  border: 0;
  background: #002;
  border: 3px solid #003;
  box-shadow: 0 10px 15px #003;
}

.click-area .click-top button:hover {
  box-shadow: 0 10px 15px #001;
  border: 2px solid #002;
}

.click-area .click-top button:active {
  border: 4px solid #002;
  box-shadow: 0 5px 15px #111;
}

.click-area .click-top button:last-child {
  margin: 0 0 0 0px;
  background: #900;
  border: 3px solid #b00;
  box-shadow: 0 10px 15px #a00;
}

.click-area .click-top button:last-child:hover {
  box-shadow: 0 10px 15px #800;
  border: 2px solid #900;
}

.click-area .click-top button:last-child:active {
  border: 4px solid #b00;
  box-shadow: 0 5px 15px #500;
}

.click-area .row {
  margin-top: 10px;
}

.click-area .col-xs-8 button {
  height: 40px;
  width: 40px;
  margin: 10px 10px 0 5px;
  border-radius: 100%;
  border: 3px solid #ddd;
  box-shadow: 0 10px 15px #444;
  outline: 0;
  background: #777;
}

.click-area .col-xs-8 button:hover {
  box-shadow: 0 10px 15px #111;
  border: 2px solid #eee;
}

.click-area .col-xs-8 button:active {
  border: 4px solid #eee;
  box-shadow: 0 5px 15px #111;
}

.click-area .col-xs-4 button {
  height: 45px;
  width: 90px;
  background: #080;
  outline: 0;
  margin: 5px 0px;
  border: 3px solid #090;
  box-shadow: 0 10px 15px #090;
  border-radius: 3px;
}

.click-area .col-xs-4 button:hover {
  box-shadow: 0 10px 15px #040;
  border: 2px solid #080;
}

.click-area .col-xs-4 button:active {
  border: 4px solid #090;
  box-shadow: 0 5px 15px #020;
}

.col-xs-4 button:nth-child(5),
.col-xs-4 button:nth-child(6) {
  background: #050;
  border: 3px solid #060;
  box-shadow: 0 10px 15px #060;
  width: 69px;
  margin: 0px 0;
}

.col-xs-4 button:nth-child(5):hover,
.col-xs-4 button:nth-child(6):hover {
  box-shadow: 0 10px 15px #020;
  border: 2px solid #050;
}

.col-xs-4 button:nth-child(5):active,
.col-xs-4 button:nth-child(6):active {
  border: 4px solid #060;
  box-shadow: 0 5px 15px #010;
}

i {
  display: block;
  text-align: center;
}



</style>
{% endblock %}
<div class="box box-primary">
  <div class="box-header">
    <i class="fa fa-whatsapp"></i>
    <h3 class="box-title">GiskerUNDLA</h3>
</div>
<link href="https://fonts.googleapis.com/css?family=Reenie+Beanie" rel="stylesheet"> 
 

  <div class="callout callout-primary ">
  <center><video id="preview" width ='200px' higth ='200px'></video></center>
  <div class="container">
  <!-- 3d object -->
  <div class="calculater">
    <figure class="front"> <!-- front side -->
      <div class="display">
        <div dir=rtl class="screen" id="screen"></div>
      </div>
    <i>--- SPIDITION --- </i>
    <hr>
      <div class="click-area">
        <div class="click-top">
         Lackymedia
        </div>
        <div class="row">
          <div class="col-xs-8">
            <button id="seven" >7</button>
            <button id="eight">8</button>
            <button id="nine">9</button>
            <button id="four">4</button>
            <button id="five">5</button>
            <button id="six">6</button>
            <button id="one">1</button>
            <button id="two">2</button>
            <button id="three">3</button>
            <button id="zero">0</button>
            <button id="d-zero">00</button>
            <button id="#">#</button>
          </div>
          <div class="col-xs-4">
             <div class="click-top">
             <button id="c">C</button><br>
             <br>
             <button id="del">Del</button>
             </div>
             <br>
               <button id="equal1" width="75px" onclick='servercodesessionbegin()'>LOGIN</button>
          </div>
      
        </div>
      </div>
    </figure>
    <figure class="back"></figure>
    <figure class="right"></figure>
    <figure class="left"></figure>
    <figure class="top"></figure>
    <figure class="bottom"></figure>
  </div>
<audio id="myAudio">
  <source src="/video/Error.mp3" type="audio/mpeg">
</audio>


  <i>Note: You can use keyboard keys.</i>
</div>
<script>


 let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });

      scanner.addListener('scan', function (content) {
        console.log(content);
        $("#screen").text(content);
        servercodesessionbegin();
      });
      Instascan.Camera.getCameras().then(function (cameras) {
        if (cameras.length > 0) {
          scanner.start(cameras[0]);
        } else {
          console.error('No cameras found.');
        }
      }).catch(function (e) {
        console.error(e);
      });

  var timeleft = 15;
  function servercodesessionbegin()
      {  
          timeleft = -50 ;
          $.ajax({
            type: "GET",
            url:  "../employee/servercodesessionbegin/"+$("#screen").text(),
            success: function(r) {
              if(r == false)
              { 
               //  document.getElementById("myAudio").play(); 
                   var timeleft = 3;
                   var downloadTimers = setInterval(function(){
                   if((timeleft % 2)== 1)$("#screen").text("Error: CODE");
                   if((timeleft % 2)== 0)$("#screen").text("");
                       timeleft -= 1;
                       if(timeleft <= -2){
                         clearInterval(downloadTimers);
                                   }
                        }, 1000);   
              }
              else {
                if(r.status == 'sessionStart' ){
                //  document.getElementById("myAudio").play(); 
                $("#screen").text("Hallo: "+r.employee);
                                    var timeleft = 6;
                                    var downloadTimers = setInterval(function(){
                                      if((timeleft % 2)== 1)$("#screen").text("Hallo: "+r.employee);
                                      if((timeleft % 2)== 0)$("#screen").text("");
                                      timeleft -= 1;
                                      if(timeleft <= -2){
                                        clearInterval(downloadTimers);
                                      }
                                    }, 1000); }
                 if(r.status == 'sessionEnd' ){
                //  document.getElementById("myAudio").play();
                $("#screen").text("Logout: "+r.employee);
                                    var timeleft = 6;
                                    var downloadTimers = setInterval(function(){
                                      if((timeleft % 2)== 1)$("#screen").text("Logout: "+r.employee);
                                      if((timeleft % 2)== 0)$("#screen").text("");
                                      timeleft -= 1;
                                      if(timeleft <= -2){
                                        clearInterval(downloadTimers);
                                      }
                                    }, 1000); }
               }
              firstNum = "";
              secondNum = "";
              $("#screen").text("");
            }
          });
      }
    </script>
   </div>
   <div class="slimScrollBar" style="background: rgb(0, 0, 0) none repeat scroll 0% 0%; width: 7px; position: absolute; top: 63px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 187.126px;"></div>
   <div class="slimScrollRail" style="width: 7px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51) none repeat scroll 0% 0%; opacity: 0.2; z-index: 90; right: 1px;"></div>
 </div>

