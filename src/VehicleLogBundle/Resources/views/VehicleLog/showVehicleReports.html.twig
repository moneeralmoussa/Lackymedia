{% extends 'base_new.html.twig' %}
{% set title = 'Fahrzeug Berichte' %}
{% block content %}

  <div class="row">
    <div class="col-xs-12">
      <div class="nav-tabs-custom">
        <ul class="nav nav-tabs" style="margin-bottom:20px;">
       
             <li><a data-toggle="tab" href="#allm"> <p onclick="document.getElementById('allhide').classList.remove('hid1')"> Mehr 100KM fahren </p></a></li>
            <li ><a data-toggle="tab" href="#menu1">Mehr 3 Stunden buchen</a></li>
              <li><a data-toggle="tab" href="#errorsmileagemenu">Fehler auf Kilometerstand </a></li>
           
        </ul>
        <div class="tab-content">
         
  
  <div id="allm" class="tab-pane fade in active" >
                <div class="table-responsive" >
                    <table id='all' class="stripe row-border order-column cell-border display table table-stripe">
                        <thead>
           
                            <tr>
                                <th>{% trans %}Mitarbeiter{% endtrans %}</th>
								<th>{% trans %}Abteilung{% endtrans %}</th>
								<th>{% trans %}Verwendung{% endtrans %}</th>
                                <th>{% trans %}Fahrzeug{% endtrans %}</th>
                                <th>{% trans %}Reservierungsbeginn{% endtrans %}</th>
                                <th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Reservierungsende{% endtrans %}</th>
								<th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Entfernung{% endtrans %}</th>
                                <th>{% trans %}Kommentar{% endtrans %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for vehicleDistance in vehiclesDistance %}
                              <tr>
                                    <td><a href="{{ path('employee_show', { 'id': vehicleDistance.employee_id }) }}">{{ vehicleDistance.name }}</a></td>
                                    <td>{{ vehicleDistance.department }}</td>
									<td>{{ vehicleDistance.reason }}</td>
                                    <td><a href="{{ path('vehicle_log_showVehicle', {'vehicle_id':vehicleDistance.vehicle_id}) }}">{{ vehicleDistance.vehicle }}</a></td>
									<td>{{ vehicleDistance.vehicle_log_begin_time }}</td>
									<td>{{ vehicleDistance.fromcity }}</td>
									<td>{{ vehicleDistance.beginmileage }}</td>
									<td>{{ vehicleDistance.vehicle_log_end_time }}</td>
									<td>{{ vehicleDistance.tocity }}</td>
									<td>{{ vehicleDistance.endmileage }}</td>
									<td>{{ vehicleDistance.Distanc }}</td>
									<td>{{ vehicleDistance.comment }}</td>
							 </tr>
                                
                            {% endfor %}
                        </tbody>
                      <tfoot>
                        
                         <tr>
                         <th>{% trans %}Mitarbeiter{% endtrans %}</th>
								<th>{% trans %}Abteilung{% endtrans %}</th>
								<th>{% trans %}Verwendung{% endtrans %}</th>
                                <th>{% trans %}Fahrzeug{% endtrans %}</th>
                                <th>{% trans %}Reservierungsbeginn{% endtrans %}</th>
                                <th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Reservierungsende{% endtrans %}</th>
								<th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Entfernung{% endtrans %}</th>
                                <th>{% trans %}Kommentar{% endtrans %}</th>
                            </tr>
					 </tfoot>
                   </table>
                </div>
            </div>


              <div id="menu1" class="tab-pane fade active" >
                <div class="table-responsive" >
                   <table id='vehicleTimelog' class="stripe row-border order-column cell-border display table table-stripe">
                        <thead>
           
                            <tr>
                             <th>{% trans %}Mitarbeiter{% endtrans %}</th>
								<th>{% trans %}Abteilung{% endtrans %}</th>
								<th>{% trans %}Verwendung{% endtrans %}</th>
                                <th>{% trans %}Fahrzeug{% endtrans %}</th>
                                <th>{% trans %}Reservierungsbeginn{% endtrans %}</th>
                                <th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Reservierungsende{% endtrans %}</th>
								<th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Fahrtzeit{% endtrans %}</th>
                                <th>{% trans %}Kommentar{% endtrans %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for vehicleTimelog in vehiclesTimelog %}
                              <tr>
                                    <td><a href="{{ path('employee_show', { 'id': vehicleTimelog.employee_id }) }}">{{ vehicleTimelog.name }}</a></td>
                                    <td>{{ vehicleTimelog.department }}</td>
									<td>{{ vehicleTimelog.reason }}</td>
                                    <td><a href="{{ path('vehicle_log_showVehicle', {'vehicle_id':vehicleTimelog.vehicle_id}) }}">{{ vehicleTimelog.vehicle }}</a></td>
									<td>{{ vehicleTimelog.vehicle_log_begin_time }}</td>
									<td>{{ vehicleTimelog.fromcity }}</td>
									<td>{{ vehicleTimelog.beginmileage }}</td>
									<td>{{ vehicleTimelog.vehicle_log_end_time }}</td>
									<td>{{ vehicleTimelog.tocity }}</td>
									<td>{{ vehicleTimelog.endmileage }}</td>
									<td>{{ vehicleTimelog.timevehicle_log }}</td>
									<td>{{ vehicleTimelog.comment }}</td>
							 </tr>
                                
                            {% endfor %}
                        </tbody>
                      <tfoot>
                      <tr>
                             <th>{% trans %}Mitarbeiter{% endtrans %}</th>
								<th>{% trans %}Abteilung{% endtrans %}</th>
								<th>{% trans %}Verwendung{% endtrans %}</th>
                                <th>{% trans %}Fahrzeug{% endtrans %}</th>
                                <th>{% trans %}Reservierungsbeginn{% endtrans %}</th>
                                <th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Reservierungsende{% endtrans %}</th>
								<th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Fahrtzeit{% endtrans %}</th>
                                <th>{% trans %}Kommentar{% endtrans %}</th>
                            </tr>
                     </tfoot>
                    </table>
                </div>
            </div>






           <div id="errorsmileagemenu" class="tab-pane fade active" >
                <div class="table-responsive" >
                    <table id='errormileage' class="stripe row-border order-column cell-border display table table-stripe">
                        <thead>
                               <tr>
                             <th>{% trans %}Mitarbeiter{% endtrans %}</th>
								<th>{% trans %}Abteilung{% endtrans %}</th>
								<th>{% trans %}Verwendung{% endtrans %}</th>
                                <th>{% trans %}Fahrzeug{% endtrans %}</th>
                                <th>{% trans %}Reservierungsbeginn{% endtrans %}</th>
                                <th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Reservierungsende{% endtrans %}</th>
								<th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
                                <th>{% trans %}Letzte Kilometerstand{% endtrans %}</th>
                                <th>{% trans %}Letzte Kilometerstand{% endtrans %}</th>
                                <th>{% trans %}Kommentar{% endtrans %}</th>
                            </tr>
                        </thead>
                  
                        <tbody>
                              {% for errormileage in errorsmileage %}
                              <tr>
                                    <td><a href="{{ path('employee_show', { 'id': errormileage.employee_id }) }}">{{ errormileage.name }}</a></td>
                                    <td>{{ errormileage.department }}</td>
									<td>{{ errormileage.reason }}</td>
                                    <td><a href="{{ path('vehicle_log_showVehicle', {'vehicle_id':errormileage.vehicle_id}) }}">{{ errormileage.vehicle }}</a></td>
									<td>{{ errormileage.vehicle_log_begin_time }}</td>
									<td>{{ errormileage.fromcity }}</td>
									<td>{{ errormileage.beginmileage }}</td>
									<td>{{ errormileage.vehicle_log_end_time }}</td>
									<td>{{ errormileage.tocity }}</td>
									<td>{{ errormileage.endmileage }}</td>
                                     <td>{{ errormileage.LastKM }}</td>
                                     <td>{{ errormileage.endmileage-errormileage.LastKM }}</td>
									<td>{{ errormileage.comment }}</td>
							 </tr>
                                
                            {% endfor %}

              
                        </tbody>
                          <tfoot>
                               <tr>
                             <th>{% trans %}Mitarbeiter{% endtrans %}</th>
								<th>{% trans %}Abteilung{% endtrans %}</th>
								<th>{% trans %}Verwendung{% endtrans %}</th>
                                <th>{% trans %}Fahrzeug{% endtrans %}</th>
                                <th>{% trans %}Reservierungsbeginn{% endtrans %}</th>
                                <th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
								<th>{% trans %}Reservierungsende{% endtrans %}</th>
								<th>{% trans %}Standort{% endtrans %}</th>
                                <th>{% trans %}Kilometerstand{% endtrans %}</th>
                                <th>{% trans %}Letzte Kilometerstand{% endtrans %}</th>
                                <th>{% trans %}Letzte Kilometerstand{% endtrans %}</th>
                                <th>{% trans %}Kommentar{% endtrans %}</th>
                            </tr>
                            </tr>
                     </tfoot>
                    </table>
                </div>
            </div>



     
          
        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" type="text/css" href="/bundles/vehicle/css/bootstrap-datetimepicker.min.css" />
     <link rel="stylesheet" type="text/css" href="/bundles/vehicle/css/jquery.dataTables.min.css" />
   <link rel="stylesheet" type="text/css" href="/bundles/newApp/fixedColumns.dataTables.min.css" />
   <style>
   th input {
        width: 90%;
    }
     </style>
 
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="/bundles/vehicle/js/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="/bundles/vehicle/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="/bundles/newApp/date-eu.js"></script>
    <script type="text/javascript" src="/bundles/newApp/dataTables.fixedColumns.min.js"></script>
    <script type="text/javascript">

    var editor; // use a global for the submit and return data rendering in the examples

$(document).ready(function() {
  $('tbody').scroll(function(e) { //detect a scroll event on the tbody
  	/*
    Setting the thead left value to the negative valule of tbody.scrollLeft will make it track the movement
    of the tbody element. Setting an elements left value to that of the tbody.scrollLeft left makes it maintain 			it's relative position at the left of the table.    
    */
    $('thead').css("left", -$("tbody").scrollLeft()); //fix the thead relative to the body scrolling
    $('thead th:nth-child(1)').css("left", $("tbody").scrollLeft()); //fix the first cell of the header
    $('tbody td:nth-child(1)').css("left", $("tbody").scrollLeft()); //fix the first column of tdbody
  });
});

        function format_salaryRemainingDaysOfVacation(value) {
            return value.toLocaleString('de-DE', { style: 'currency', currency: 'EUR' }) + " (" + (value*1.2).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' }) + ")";
        }
        function load_salaryRemainingDaysOfVacation(salaryRemainingDaysOfVacation_date) {
            var load_salaryRemainingDaysOfVacation_url = "{{ path('employee_salaryRemainingDaysOfVacation_short') }}"+salaryRemainingDaysOfVacation_date;
            $("#draw_workdays_img").show();
            $.ajax({
              method: "GET",
              url: load_salaryRemainingDaysOfVacation_url,
            })
            .done(function( msg ) {
                $("#draw_workdays_img").hide();

                $("#salaryRemainingDaysOfVacationDate").html(msg.date);
                $("#salaryRemainingDaysOfVacationGl").html(format_salaryRemainingDaysOfVacation(msg.gl));
                $("#salaryRemainingDaysOfVacationDialog").html(format_salaryRemainingDaysOfVacation(msg.dialog));
            });
        }
        $( document ).ready(function() {
            searching: 'false',
            $('#datetimepicker1').datetimepicker({
                searching: 'false',
                locale: 'de',
                format: 'MMM YYYY',
                defaultDate: '{{ date()|date('n') }}/1/{{ date()|date('Y') }}',
                date: '{{ date()|date('n') }}/1/{{ date()|date('Y') }}',
            });
            $('#datetimepicker1').on('dp.change', function(e){
                load_salaryRemainingDaysOfVacation(e.date.format('YYYY-MM-DD'));
            });
        });


$(document).ready(function() {
    // Setup - add a text input to each footer cell
    $('#errormileage tfoot th').each( function (i) {
        var title = $('#errormileage thead th').eq( $(this).index() ).text();
        $(this).html( '<input type="text" placeholder="'+title+'" data-index="'+i+'" />' );
    } );
  
    // DataTable
    var table = $('#errormileage').DataTable( {
        scrollY:        "700px",
        scrollX:        true,
        scrollCollapse: true,
        paging:         true,
        order: [[ 4, "desc" ]],
        dom: 'Bfrtip',  
        select: true,
          lengthMenu: [
            [ -1, 10, 25, 50 ],
            [ 'Zeige alle Zeilen', '10 Zeilen', '25 Zeilen', '50 Zeilen']
        ],
         buttons: [ 
            { extend: 'pageLength', text:     'Zeige <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>'},
          { extend: 'print',text:      'Drucken <i class="fa fa-print"></i>' },
            
            {
                extend:    'copyHtml5',
                text:      'Kopieren <i class="fa fa-files-o"></i>',
                titleAttr: 'Copy'
            },
            {
                extend:    'excelHtml5',
                text:      'Excel Exportieren <i class="fa fa-file-excel-o"></i>',
                titleAttr: 'Excel'
            },
            {
                extend:    'csvHtml5',
                text:      'CSV Exportieren <i class="fa fa-file-text-o"></i>',
                titleAttr: 'CSV'
            },
            {
                extend:    'pdfHtml5',
                text:      'PDF Exportieren <i class="fa fa-file-pdf-o"></i>',
                titleAttr: 'PDF'
            }
        
        
        ],
          language: {
           buttons: {
            pageLength: {
                _: "Zeige %d Zeilen <i class='fa fa-cog fa-spin fa-1x fa-fw' aria-hidden='true'></i>",
                '-1': "Zeige alle Zeilen <i class='fa fa-cog fa-spin fa-1x fa-fw' aria-hidden='true'></i>"
                    }
            },
            sEmptyTable:   	"Keine Daten in der Tabelle vorhanden",
            sInfo:         	"_START_ bis _END_ von _TOTAL_ Einträgen",
            sInfoEmpty:    	"0 bis 0 von 0 Einträgen",
            sInfoFiltered: 	"(gefiltert von _MAX_ Einträgen)",
            sInfoPostFix:  	"",
            sInfoThousands:  	".",
            sLengthMenu:   	"_MENU_ Einträge anzeigen",
            sLoadingRecords: 	"Wird geladen...",
            sProcessing:   	"Bitte warten...",
            sSearch:       	"Suchen",
            sZeroRecords:  	"Keine Einträge vorhanden.",
            oPaginate: {
             sFirst:    	"Erste",
             sPrevious: 	"Zurück",
             sNext:     	"Nächste",
             sLast:     	"Letzte"
            },
            oAria: {
              sSortAscending:  ": aktivieren, um Spalte aufsteigend zu sortieren",
              sSortDescending: ": aktivieren, um Spalte absteigend zu sortieren"
            }
        }
    } );
 
    // Filter event handler
    $( table.table().container() ).on( 'keyup', 'tfoot input', function () {
        table
            .column( $(this).data('index') )
            .search( this.value )
            .draw();
    } );
} );


$(document).ready(function() {
    // Setup - add a text input to each footer cell
    $('#vehicleTimelog tfoot th').each( function (i) {
        var title = $('#vehicleTimelog thead th').eq( $(this).index() ).text();
        $(this).html( '<input type="text" placeholder="'+title+'" data-index="'+i+'" />' );
    } );
  
    // DataTable
    var table = $('#vehicleTimelog').DataTable( {
        scrollY:        "700px",
        scrollX:        true,
        scrollCollapse: true,
        paging:         true,
        order: [[ 4, "desc" ]],
        
        dom: 'Bfrtip',  
        select: true,
          lengthMenu: [
            [ -1, 10, 25, 50 ],
            [ 'Zeige alle Zeilen', '10 Zeilen', '25 Zeilen', '50 Zeilen']
        ],
         buttons: [ 
            { extend: 'pageLength', text:     'Zeige <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>'},
          { extend: 'print',text:      'Drucken <i class="fa fa-print"></i>' },
            
            {
                extend:    'copyHtml5',
                text:      'Kopieren <i class="fa fa-files-o"></i>',
                titleAttr: 'Copy'
            },
            {
                extend:    'excelHtml5',
                text:      'Excel Exportieren <i class="fa fa-file-excel-o"></i>',
                titleAttr: 'Excel'
            },
            {
                extend:    'csvHtml5',
                text:      'CSV Exportieren <i class="fa fa-file-text-o"></i>',
                titleAttr: 'CSV'
            },
            {
                extend:    'pdfHtml5',
                text:      'PDF Exportieren <i class="fa fa-file-pdf-o"></i>',
                titleAttr: 'PDF'
            }
        
        
        ],
          language: {
           buttons: {
            pageLength: {
                _: "Zeige %d Zeilen <i class='fa fa-cog fa-spin fa-1x fa-fw' aria-hidden='true'></i>",
                '-1': "Zeige alle Zeilen <i class='fa fa-cog fa-spin fa-1x fa-fw' aria-hidden='true'></i>"
                    }
            },
            sEmptyTable:   	"Keine Daten in der Tabelle vorhanden",
            sInfo:         	"_START_ bis _END_ von _TOTAL_ Einträgen",
            sInfoEmpty:    	"0 bis 0 von 0 Einträgen",
            sInfoFiltered: 	"(gefiltert von _MAX_ Einträgen)",
            sInfoPostFix:  	"",
            sInfoThousands:  	".",
            sLengthMenu:   	"_MENU_ Einträge anzeigen",
            sLoadingRecords: 	"Wird geladen...",
            sProcessing:   	"Bitte warten...",
            sSearch:       	"Suchen",
            sZeroRecords:  	"Keine Einträge vorhanden.",
            oPaginate: {
             sFirst:    	"Erste",
             sPrevious: 	"Zurück",
             sNext:     	"Nächste",
             sLast:     	"Letzte"
            },
            oAria: {
              sSortAscending:  ": aktivieren, um Spalte aufsteigend zu sortieren",
              sSortDescending: ": aktivieren, um Spalte absteigend zu sortieren"
            }
        }
    } );
 
    // Filter event handler
    $( table.table().container() ).on( 'keyup', 'tfoot input', function () {
        table
            .column( $(this).data('index') )
            .search( this.value )
            .draw();
    } );
} );



$(document).ready(function() {
    // Setup - add a text input to each footer cell
    $('#all tfoot th').each( function (i) {
        var title = $('#all thead th').eq( $(this).index() ).text();
        $(this).html( '<input type="text" placeholder="'+title+'" data-index="'+i+'" />' );
    } );
  
    // DataTable
    var table = $('#all').DataTable( {
        scrollY:        "700px",
        scrollX:        true,
        scrollCollapse: true,
        paging:         true,
        order: [[ 4, "desc" ]],
      
      dom: 'Bfrtip',  
        select: true,
          lengthMenu: [
            [ -1, 10, 25, 50 ],
            [ 'Zeige alle Zeilen', '10 Zeilen', '25 Zeilen', '50 Zeilen']
        ],
         buttons: [ 
            { extend: 'pageLength', text:     'Zeige <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>'},
          { extend: 'print',text:      'Drucken <i class="fa fa-print"></i>' },
            
            {
                extend:    'copyHtml5',
                text:      'Kopieren <i class="fa fa-files-o"></i>',
                titleAttr: 'Copy'
            },
            {
                extend:    'excelHtml5',
                text:      'Excel Exportieren <i class="fa fa-file-excel-o"></i>',
                titleAttr: 'Excel'
            },
            {
                extend:    'csvHtml5',
                text:      'CSV Exportieren <i class="fa fa-file-text-o"></i>',
                titleAttr: 'CSV'
            },
            {
                extend:    'pdfHtml5',
                text:      'PDF Exportieren <i class="fa fa-file-pdf-o"></i>',
                titleAttr: 'PDF'
            }
        
        
        ],
          language: {
           buttons: {
            pageLength: {
                _: "Zeige %d Zeilen <i class='fa fa-cog fa-spin fa-1x fa-fw' aria-hidden='true'></i>",
                '-1': "Zeige alle Zeilen <i class='fa fa-cog fa-spin fa-1x fa-fw' aria-hidden='true'></i>"
                    }
            },
            sEmptyTable:   	"Keine Daten in der Tabelle vorhanden",
            sInfo:         	"_START_ bis _END_ von _TOTAL_ Einträgen",
            sInfoEmpty:    	"0 bis 0 von 0 Einträgen",
            sInfoFiltered: 	"(gefiltert von _MAX_ Einträgen)",
            sInfoPostFix:  	"",
            sInfoThousands:  	".",
            sLengthMenu:   	"_MENU_ Einträge anzeigen",
            sLoadingRecords: 	"Wird geladen...",
            sProcessing:   	"Bitte warten...",
            sSearch:       	"Suchen",
            sZeroRecords:  	"Keine Einträge vorhanden.",
            oPaginate: {
             sFirst:    	"Erste",
             sPrevious: 	"Zurück",
             sNext:     	"Nächste",
             sLast:     	"Letzte"
            },
            oAria: {
              sSortAscending:  ": aktivieren, um Spalte aufsteigend zu sortieren",
              sSortDescending: ": aktivieren, um Spalte absteigend zu sortieren"
            }
        }
    } );
 
    // Filter event handler
    $( table.table().container() ).on( 'keyup', 'tfoot input', function () {
        table
            .column( $(this).data('index') )
            .search( this.value )
            .draw();
    } );
} );

    </script>
{% endblock %}
